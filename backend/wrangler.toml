name = "chorecoin-backend"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[[d1_databases]]
binding = "DB"
database_name = "chorecoin-db"
database_id = "d1-mock"

# Development environment
[env.development]
name = "chorecoin-backend-dev"
vars = { ENVIRONMENT = "development" }

[[env.development.d1_databases]]
binding = "DB"
database_name = "chorecoin-db"
database_id = "43cc6ad6-e92f-4f83-bc02-8cc0c22303a9"

# Production environment with Static Assets
[env.production]
name = "chorecoin-backend-prod"
vars = { ENVIRONMENT = "production" }

[[env.production.d1_databases]]
binding = "DB"
database_name = "chorecoin-db-prod"
database_id = "fdde4290-e389-472e-bd04-68bee2cd1dc7"

# Static Assets (Web app frontend)
[env.production.assets]
directory = "../web/dist"
binding = "ASSETS"
not_found_handling = "single-page-application"
